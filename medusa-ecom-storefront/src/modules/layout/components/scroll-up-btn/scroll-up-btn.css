/* Class prefix: gg- */
/* Nowy styl: kompaktowy, modernistyczny "glass" z subtelnym gradientem i ringiem */

:root {
    color-scheme: light dark;

    /* Rozmiary (kompakt) */
    --gg-su-size: 44px;
    --gg-su-icon: 18px;

    /* Kolory bazowe (neutralny, nowoczesny) */
    --gg-su-fg: #0b0f14;              /* kolor ikony na jasnym tle */
    --gg-su-fg-dark: #e6eaf0;         /* kolor ikony na ciemnym tle */
    --gg-su-bg: rgba(255,255,255,0.12);
    --gg-su-bg-dark: rgba(20,24,30,0.35);

    /* Ring (akcent) */
    --gg-su-g1: #7c3aed; /* violet */
    --gg-su-g2: #22d3ee; /* cyan */
    --gg-su-g3: #10b981; /* emerald */

    /* Obramowanie / separator */
    --gg-su-border: rgba(255,255,255,0.28);
    --gg-su-border-dark: rgba(255,255,255,0.16);

    /* Cienie */
    --gg-su-shadow: 0 10px 24px rgba(0,0,0,0.35);
    --gg-su-shadow-strong: 0 14px 36px rgba(0,0,0,0.45);
}

/* Preferencje systemowe: dostosuj kontrast ikony */
@media (prefers-color-scheme: dark) {
    :root {
        --gg-su-fg: var(--gg-su-fg-dark);
    }
}

.gg-scroll-up {
    position: fixed;
    right: max(14px, env(safe-area-inset-right));
    bottom: calc(16px + env(safe-area-inset-bottom));
    z-index: 9999;

    width: var(--gg-su-size);
    height: var(--gg-su-size);
    border-radius: 14px; /* nowoczesny, lekko "squircle" look */
    display: inline-flex;
    align-items: center;
    justify-content: center;

    /* Tło typu glass */
    background: var(--gg-su-bg);
    backdrop-filter: saturate(130%) blur(10px);
    -webkit-backdrop-filter: saturate(130%) blur(10px);

    border: 1px solid var(--gg-su-border);
    box-shadow: var(--gg-su-shadow);

    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;

    /* Płynne pojawianie, mikro-ruch */
    opacity: 0;
    transform: translateY(10px) scale(0.96);
    transition:
            opacity 250ms ease,
            transform 250ms cubic-bezier(0.2, 0.8, 0.2, 1),
            box-shadow 220ms ease;

    /* Hidden state (niedostępny dla kursora/ekranu) */
    pointer-events: none;
}

/* Ciemny tryb – lekko inny glass */
@media (prefers-color-scheme: dark) {
    .gg-scroll-up {
        background: var(--gg-su-bg-dark);
        border-color: var(--gg-su-border-dark);
    }
}

/* Pseudoelement: subtelny gradientowy ring (conic) */
.gg-scroll-up::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    padding: 1px;
    background: conic-gradient(from 0deg,
    var(--gg-su-g1),
    var(--gg-su-g2),
    var(--gg-su-g3),
    var(--gg-su-g1));
    /* maskowanie do pierścienia */
    -webkit-mask:
            linear-gradient(#000 0 0) content-box,
            linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;

    opacity: 0.55;
    filter: blur(6px);
    transition: opacity 220ms ease, transform 5000ms linear;
    transform: rotate(0deg);
    pointer-events: none;
}

/* Stan widoczny */
.gg-scroll-up.gg-scroll-up--visible {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
}

/* Oddechowa animacja przy widoczności (delikatna) */
@keyframes gg-su-breathe {
    0%   { box-shadow: var(--gg-su-shadow); }
    50%  { box-shadow: var(--gg-su-shadow-strong); }
    100% { box-shadow: var(--gg-su-shadow); }
}

.gg-scroll-up.gg-scroll-up--visible {
    animation: gg-su-breathe 4.2s ease-in-out infinite;
}

/* Ikona */
.gg-scroll-up__icon {
    width: var(--gg-su-icon);
    height: var(--gg-su-icon);
    fill: var(--gg-su-fg);
    transition: transform 160ms ease, opacity 160ms ease;
    will-change: transform;
    opacity: 0.92;
}

/* Hover/active – subtelna interakcja */
.gg-scroll-up:hover {
    transform: translateY(-1px) scale(1.02);
}

.gg-scroll-up:active {
    transform: translateY(0) scale(0.96);
    transition-duration: 120ms;
}

.gg-scroll-up:hover .gg-scroll-up__icon {
    transform: translateY(-1px);
    opacity: 1;
}

/* Ring na hover – niech lekko jaśnieje i „sunie” */
.gg-scroll-up:hover::before {
    opacity: 0.85;
    transform: rotate(20deg);
}

/* Focus-visible – wyraźny outline dla klawiatury */
.gg-scroll-up:focus-visible {
    outline: none;
    box-shadow:
            0 0 0 3px color-mix(in oklab, white 70%, transparent),
            0 0 0 6px color-mix(in oklab, var(--gg-su-g2) 50%, transparent),
            var(--gg-su-shadow-strong);
}

/* Accessibility: screen-reader only */
.gg-su-sr-only {
    position: absolute !important;
    width: 1px; height: 1px;
    padding: 0; margin: -1px;
    overflow: hidden; clip: rect(0, 0, 0, 0);
    white-space: nowrap; border: 0;
}

/* Małe ekrany – wciąż kompaktowo i wygodnie do kliknięcia */
@media (max-width: 480px) {
    :root {
        --gg-su-size: 42px;
        --gg-su-icon: 17px;
    }
    .gg-scroll-up {
        right: max(12px, env(safe-area-inset-right));
        bottom: calc(14px + env(safe-area-inset-bottom));
    }
}

/* Prefer-reduced-motion: ogranicz animacje, zachowaj czytelność */
@media (prefers-reduced-motion: reduce) {
    .gg-scroll-up {
        transition: opacity 120ms linear;
        animation: none;
        transform: none;
    }
    .gg-scroll-up:hover,
    .gg-scroll-up:active {
        transform: none;
    }
    .gg-scroll-up::before {
        transition: opacity 120ms linear;
    }
}
